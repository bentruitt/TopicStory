{% extends "base.html" %}

{% block title %}
News Analyzer
{% endblock %}

{% block header %}
{{ x }}
{% endblock %}

{% block links %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='d3.css') }}">
<script src="https://d3js.org/d3.v4.js"></script>
{% endblock %}

{% block content %}
This will be my D3 scratch page.
<br><br>

This is a chart!
<div class="chart">
  <div style="width: 40px;">4</div>
  <div style="width: 80px;">8</div>
  <div style="width: 150px;">15</div>
  <div style="width: 160px;">16</div>
  <div style="width: 230px;">23</div>
  <div style="width: 420px;">42</div>
</div>
<br><br>

This chart pulls data from the server!
<div class="chart">
    {% for d in data %}
    <div style="width: {{d}}px;">{{d}}</div>
    {% endfor %}
</div>
<br><br>

This chart uses d3!
<div class="chart ex1">
</div>
<script type="text/javascript">
var data = [4, 8, 15, 16, 23, 42];
d3.select(".ex1")
    .selectAll("div")
    .data(data)
    .enter()
        .append("div")
        .style("width", function(d) { return d * 10 + "px"; })
        .text(function(d) { return d; });
</script>
<br><br>

This chart uses d3 and data from the server!
<div class="chart ex2">
</div>
<script type="text/javascript">
var data = {{ data|tojson }};
d3.select(".ex2")
    .selectAll("div")
    .data(data)
    .enter()
        .append("div")
        .style("width", function(d) { return d*10 + "px"; })
        .text(function(d) { return d; });
</script>
<br><br>

This chart uses scaling in d3!
<div class="chart ex3">
</div>
<script type="text/javascript">
var data = {{ data|tojson }};
var scale = d3.scaleLinear()
    .domain([0, d3.max(data)])
    .range([0, 500]);
d3.select(".ex3")
    .selectAll("div")
        .data(data)
    .enter().append("div")
        .style("width", function(d) { return scale(d) + "px" })
        .text(function(d) { return d; });
</script>
<br><br>

This chart uses SVG!
<br>
<svg class="chart-svg ex4" width="420" height="120">
  <g transform="translate(0,0)">
    <rect width="40" height="19"></rect>
    <text x="37" y="9.5" dy=".35em">4</text>
  </g>
  <g transform="translate(0,20)">
    <rect width="80" height="19"></rect>
    <text x="77" y="9.5" dy=".35em">8</text>
  </g>
  <g transform="translate(0,40)">
    <rect width="150" height="19"></rect>
    <text x="147" y="9.5" dy=".35em">15</text>
  </g>
  <g transform="translate(0,60)">
    <rect width="160" height="19"></rect>
    <text x="157" y="9.5" dy=".35em">16</text>
  </g>
  <g transform="translate(0,80)">
    <rect width="230" height="19"></rect>
    <text x="227" y="9.5" dy=".35em">23</text>
  </g>
  <g transform="translate(0,100)">
    <rect width="420" height="19"></rect>
    <text x="417" y="9.5" dy=".35em">42</text>
  </g>
</svg>
<br><br>

This chart uses SVG and d3!
<br>
<svg class="chart-svg ex5" width="420" height="120">
</svg>
<script type="text/javascript">
var data = {{ data|tojson }};
var width=420;
var barHeight=20;

var x = d3.scaleLinear()
    .domain([0, d3.max(data)])
    .range([0, width]);

var chart = d3.select(".ex5")
    .attr("width", width)
    .attr("height", barHeight * data.length);

var bar = chart.selectAll("g")
    .data(data)
    .enter().append("g")
    .attr("transform", function(d, i) { return "translate(0," + i*barHeight + ")"; });

bar.append("rect")
    .attr("width", x)
    .attr("height", barHeight - 1);

bar.append("text")
    .attr("x", function(d) { return x(d) - 3; })
    .attr("y", barHeight / 2)
    .attr("dy", ".35em")
    .text(function(d) { return d; });
</script>

{% endblock %}
